<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>Evolution of Life</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="assets/main.css">
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.14/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.14/"></script>

    <script>
require(["esri/Map",
         "esri/views/MapView",
         "esri/layers/ImageryLayer",
         "esri/layers/support/MosaicRule"], 
function(Map, 
         MapView,
         ImageryLayer,
         MosaicRule) {

/*START ALL USER CODE HERE*/
    /* SHARED GLOBALS SECTION */

    var gameStarted = false;
    var realTimeElapsedS = 0;
    var millionYearBCE = -1000;

    /* END SHARED GLOBALS SECTION*/

    /*GAME STATS DIV SECTION*/

    //some functions here

    /* END GAME STATS DIV SECTION*/

    /* ARCGIS JS API SECTION*/
    var map = new Map({
          basemap: "streets"
        });

        var view = new MapView({
          container: "mapViewDiv",
          map: map,
          zoom: 2,
          center: [0,0] // longitude, latitude
        });

        var layer = new ImageryLayer({
          url:
            "https://apl.esri.com/apl3/rest/services/P_200_0/ImageServer",
          mosaicRule: new MosaicRule({
              lockRasterIds: [41,],
              method: "lock-raster",
              ascending: false}),
        });

       map.layers.add(layer);

    var i = 41;
   intervalUpdate200MilToPresent = setInterval(function(){
        
        var layer = new ImageryLayer({
          url:
            "https://apl.esri.com/apl3/rest/services/P_200_0/ImageServer",
          mosaicRule: new MosaicRule({
              lockRasterIds: [i,],
              method: "lock-raster",
              ascending: false}),
        });

        //map.layers.removeAt(0);
        map.layers.add(layer);
        i -= 1;
        if(i<0){
            console.log("Clearing 200Mil to present interval");
            clearInterval(intervalUpdate200MilToPresent);
        }
    }, 1000);
      });
    /* END ARCGIS JS API SECTION */
/*END ALL USER CODE*/
    </script>
  </head>

  <body>
    <div id="container">
        <div id="mapViewDiv"></div>
        <div id="gameStatsDiv">
            <div id="examplePopup"><p>Hello popup!</p></div>
        </div>
    </div>
  </body>
</html>
